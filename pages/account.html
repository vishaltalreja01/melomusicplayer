<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>MELO Music Player</title>
    <!-- linking stylesheets for font style and icon library -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="/css/account.css">

</head>

<!-- for top header navigation -->

<body onload="getUser();">

    <script src="/js/main.js" defer></script>
    <!-- <script src="/js/sign_up.js" defer></script> -->

    <div class="nav-wrapper">
        <!-- left side of navigation includes logo and application title -->
        <div class="left-side">
            <div class="logo" style="width: 15.7em;
            background-color: #222222;">
                <img src="/img/MELO1.png" />
            </div>

        </div>


        <!-- right side of navigation includes sign in and log in -->
        <div class="right-side" id="no_user_div">
            <div class="nav-link-wrapper">
                <a href="SignIn.html">Sign up</a>
            </div>
            <div class="nav-link-wrapper">
                <a href="LogIn.html">Log in</a>
            </div>
        </div>

        <div class="right-side hidden logged_user_div" id="logged_user_div">
            <Form class="inline">
                <div class="search">
                    <i class="fa fa-search" style="font-size: 20px;"></i>
                    <input type="text" placeholder="Search a song" class="text-field">
                </div>
            </Form>
            <img src="/img/account_circle.svg" id="account_icon" class="account_icon">
            <div class="dropdown_menu hidden" id="dropdown_menu">
                <p>Account</p>
                <p>Profile</p>
                <p id="logout_btn"><a href="/index.html">Logout</a> </p>

            </div>
        </div>
    </div>



    <div class="container">
        <!-- secondary nav is side bar menu-->
        <div class="secondary-nav">
            <ul>
                <!-- each menu option has an icon and text-->
                <li>
                    <a href="/index.html"><i class="fa fa-fw fa-home"></i>Home</a>
                </li>
                <li>
                    <a href="#"><i class="fa fa-fw fa-search"></i>Search</a>
                </li>
                <li>
                    <a href="playlist.html"><i class="fa fa-fw fa-plus"></i>Create a playlist</a>
                </li>
                <li>
                    <a href="#"><i class="fa fa-fw fa-heart"></i>Liked songs</a>
                </li>
                <!-- other menu links include account settings and privacy & policy-->
                <li>
                    <a href="account.html"><i class="fa fa-fw fa-gear"></i>Account Settings</a>
                </li>
                <li>
                    <a href="#"><i class="fa fa-fw fa-shield"></i>Privacy & Policy</a>
                </li>

            </ul>
        </div>
        <!-- main section consists of three sections (music genre) with the same structure but different content, composed
        of a title and a horizontal set of five aligned images-->

        <div class="right-side-container">

            <!-- gallery wrapper wraps each of the three sections: Rap Songs, Vibey Songs, and Pop Songs -->
            <div class="gallery-wrapper" style="color: white;">
                <h1>Your Profile</h1>
                <h2 class="subtitle">Account Information</h2>
                <div class="input_container color-white">
                    <p class="color-white">Username</p>
                    <input type="text" placeholder="Username" id="username" />
                </div>

                <div class="input_container">
                    <p class="color-white">Password</p>
                    <input type="password" placeholder="Password" id="password" />
                </div>

                <h2 class="subtitle">Personal Information</h2>

                <div class="double_input_container">
                    <div class="input_container">
                        <p>Name</p>
                        <input type="text" placeholder="Name" id="name" />
                    </div>

                    <div class="input_container">
                        <p>Surname</p>
                        <input type="text" placeholder="Surname" id="surname" />
                    </div>

                </div>

                <div class="input_container">
                    <p>Email</p>
                    <input type="email" placeholder="Email" id="email" />
                </div>

                <div class="double_input_container">

                    <div class="input_container">
                        <p>Date of Birth</p>
                        <input type="date" placeholder="dd/mm/yyyy" id="date" />
                    </div>

                    <div class="input_container">
                        <p>Profile Image </p>
                        <label for="profile_input" class="profile_input_label">
                            Upload
                        </label>
                        <input type="file" placeholder="dd/mm/yyyy" id="profile" />
                    </div>
                </div>


                <div class="checkbox_div">
                    <input type="checkbox" id="checkbox_input" />
                    <p>I have read the <span class="terms_conditions">Terms & Conditions</span></p>
                </div>

                <div class="error_div" id="error_div">
                    <img src="/images/error_icon.svg">
                    <p class="error_text" id="error_text"></p>
                </div>

                <div class="button_div">
                    <a class="Button2" href="/index.html">Back</a>
                    <a class="Button" id="save_account_btn" onclick="save()">Save</a>
                </div>

            </div>
        </div>
    </div>
</body>
<script>
    const Users = JSON.parse(localStorage.getItem("Users"));
    const currentUser = JSON.parse(localStorage.getItem("CurentUser"));
    console.log(currentUser.username);
    document.getElementById('username').value = currentUser.username;
    document.getElementById('name').value = currentUser.name;
    document.getElementById('password').value = currentUser.password;
    document.getElementById('surname').value = currentUser.surname;
    document.getElementById('email').value = currentUser.email;
    document.getElementById('date').value = currentUser.date;
    // document.getElementById('profile').value = Users[0].profile;

    function save() {
        const allUsers = JSON.parse(localStorage.getItem("Users"));
        const currentUser = JSON.parse(localStorage.getItem("CurentUser"));
        const updatedUser = {
            username: document.getElementById('username').value,
            password: document.getElementById('password').value,
            name: document.getElementById('name').value,
            surname: document.getElementById('surname').value,
            email: document.getElementById('email').value,
            date: document.getElementById('date').value,
        }
        console.log(updatedUser)

        const updatedUsers = allUsers.map((user) => {
            if (user.username === currentUser.username) {
                return updatedUser;
            } else {
                return user;
            }
        })

        localStorage.setItem("Users", JSON.stringify(updatedUsers));
        localStorage.setItem("CurentUser", JSON.stringify(updatedUser));
    }
</script>

</html>